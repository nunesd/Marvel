(this.webpackJsonpmarvel=this.webpackJsonpmarvel||[]).push([[0],{34:function(t,e,c){},35:function(t,e,c){},37:function(t,e,c){},49:function(t,e,c){},50:function(t,e,c){},51:function(t,e,c){},72:function(t,e,c){},73:function(t,e,c){"use strict";c.r(e);var n=c(1),i=c.n(n),r=c(11),a=c.n(r),o=(c(34),c.p+"static/media/marvel-logo.70c9f7c4.svg"),s=(c(35),c(0)),u=function(){return Object(s.jsx)("div",{className:"header",children:Object(s.jsx)("img",{src:o,alt:"Logo da Marvel"})})},l=c(4),f=function(t){var e=Object(n.useState)(t),c=Object(l.a)(e,2),i=c[0],r=c[1];return Object(n.useEffect)((function(){var e=setTimeout((function(){r(t)}),1e3);return function(){clearTimeout(e)}}),[t]),i},j=(c(37),function(t){var e=t.onSearchPerTitle,c=t.onSearchPerYear,i=Object(n.useState)(""),r=Object(l.a)(i,2),a=r[0],o=r[1],u=Object(n.useState)(""),j=Object(l.a)(u,2),d=j[0],b=j[1],m=Object(n.useState)(!1),O=Object(l.a)(m,2),h=O[0],p=O[1],v=f(a),x=f(d),P=function(t,e){"year"===e?b(t):o(t)};return Object(n.useEffect)((function(){p(!0)}),[]),Object(n.useEffect)((function(){h&&c(NaN===Number(x)&&x.toString().length?void 0:Number(x))}),[x]),Object(n.useEffect)((function(){h&&e(v)}),[v]),Object(s.jsxs)("header",{className:"search",children:[Object(s.jsx)("input",{type:"text",value:a,placeholder:"Pesquisar por t\xedtulo",onChange:function(t){var e=t.target.value;P(e,"text")}}),Object(s.jsx)("input",{type:"text",value:d,placeholder:"Pesquisar por ano",onChange:function(t){var e=t.target.value;return P(e,"year")}})]})}),d=c(3),b=c(26),m=c.n(b),O=c(29),h=(c(49),function(t){var e=t.isDetail,c=t.onClick,n=Object(O.a)(t,["isDetail","onClick"]),i=n.id,r=n.img,a=n.title,o=n.printPrice,u=n.digitalPrice;return Object(s.jsxs)("div",{className:"comic-container".concat(e?"":" list"),"data-testid":"comic-container-".concat(i),onClick:function(){return c&&c(n)},children:[Object(s.jsx)("img",{src:r,alt:a}),Object(s.jsx)("h2",{children:a}),e&&Object(s.jsxs)("div",{className:"paragraphs",children:[Object(s.jsxs)("p",{children:["Identificador: ",i]}),Object(s.jsxs)("p",{children:["Pre\xe7o de impress\xe3o:"," ",o?"USD ".concat(o):"indefinido"]}),Object(s.jsxs)("p",{children:["Pre\xe7o digital: ",u?"USD ".concat(u):"indefinido"]})]})]})}),p=(c(50),function(t){var e=t.comics,c=Object(n.useState)(!1),i=Object(l.a)(c,2),r=i[0],a=i[1],o=Object(n.useState)(),u=Object(l.a)(o,2),f=u[0],j=u[1],b=function(t){j(t),O(!0)},O=function(t){a(t)};return Object(s.jsxs)("div",{className:"comics-container".concat((null===e||void 0===e?void 0:e.length)?"":" empty"),"data-testid":(null===e||void 0===e?void 0:e.length)?"comics-container":"empty",children:[(null===e||void 0===e?void 0:e.length)?e.map((function(t){return Object(s.jsx)(h,Object(d.a)(Object(d.a)({},t),{},{isDetail:!1,onClick:b}),t.id)})):Object(s.jsx)("h3",{children:"N\xe3o h\xe1 quadrinhos dispon\xedveis"}),Object(s.jsx)(m.a,{isOpen:r,onRequestClose:function(){return O(!1)},contentLabel:"detalhe do quadrinho",children:f&&Object(s.jsx)(h,Object(d.a)(Object(d.a)({},f),{},{isDetail:!0,onClick:b}))})]})}),v=(c(51),function(t){var e=t.onSearchPerTitle,c=t.onSearchPerYear,n=t.onSeeMore,i=t.comics,r=t.canSeeMore;return Object(s.jsxs)("section",{className:"body-container",children:[Object(s.jsx)(j,{onSearchPerTitle:e,onSearchPerYear:c}),Object(s.jsx)(p,{comics:i}),Object(s.jsx)("div",{className:"button-container",children:!!(null===i||void 0===i?void 0:i.length)&&r&&Object(s.jsx)("button",{onClick:n,children:"Ver Mais"})})]})}),x=c(12),P=c(5),S=c.n(P),g=c(8),C=c(27),E=c.n(C),_=c(28),T=c.n(_),y=function(t){var e=t.publicKey,c=t.privateKey,n=t.time,i=t.url,r=Object({NODE_ENV:"production",PUBLIC_URL:"/Marvel",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_PRIVATE_KEY:"7263cc17f9e2a64a26ce6bbf6a460d15c79ee632",REACT_APP_PUBLIC_KEY:"5ed86cfe1a095db6b44e41ad46ffec77"}),a=r.REACT_APP_PUBLIC_KEY,o=r.REACT_APP_PRIVATE_KEY,s=n||Number(new Date),u=T.a.create();return u.update(s+(c||o)+(e||a)),E.a.get(i,{baseURL:"https://gateway.marvel.com/v1/public",params:{ts:s,apikey:a,hash:u.hex()},timeout:1e4,method:"get",responseType:"json"})},Y=function(t){var e="/comics?limit=".concat(t.limit,"&offset=").concat(t.offset);return t.title&&(e+="&title=".concat(t.title)),t.startYear&&(e+="&startYear=".concat(t.startYear)),e},N=function(t){return t.map((function(t){var e,c;return{id:t.id,title:t.title,img:"".concat(t.thumbnail.path,"/portrait_uncanny.").concat(t.thumbnail.extension),printPrice:null===(e=t.prices.find((function(t){return"printPrice"===t.type})))||void 0===e?void 0:e.price,digitalPrice:null===(c=t.prices.find((function(t){return"digitalPrice"===t.type})))||void 0===c?void 0:c.price}}))},k=(c(72),function(t){var e=function(t){var e=Object(n.useState)({limit:20,offset:0,size:0,total:0,comics:[]}),c=Object(l.a)(e,2),i=c[0],r=c[1],a=function(){var t=Object(g.a)(S.a.mark((function t(e){var c,n,r,a,o,s,u;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=Y(e),t.prev=1,t.next=4,y(Object(d.a)(Object(d.a)({},e),{},{url:c}));case 4:return n=t.sent,r=n.data.data,a=r.results,o=r.total,s=r.limit,u=r.offset,t.abrupt("return",{results:a,total:o,limit:s,offset:u});case 13:return t.prev=13,t.t0=t.catch(1),t.abrupt("return",Object(d.a)(Object(d.a)({},i),{},{results:[]}));case 16:case"end":return t.stop()}}),t,null,[[1,13]])})));return function(e){return t.apply(this,arguments)}}(),o=function(){var t=Object(g.a)(S.a.mark((function t(e){var c,n,o,s,u,l,f;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a(e);case 2:c=t.sent,n=c.results,o=c.total,s=c.limit,u=c.offset,l=N(n),f=e.startYear===i.startYear&&e.title===i.title?[].concat(Object(x.a)(i.comics),Object(x.a)(l)):l,r((function(t){return Object(d.a)(Object(d.a)({},t),{},{comics:f,size:l.length,total:o,limit:s,offset:u,title:e.title,startYear:e.startYear})}));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),s=function(){var t=Object(g.a)(S.a.mark((function t(){return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o({limit:20,offset:i.offset+i.limit,title:i.title,startYear:i.startYear});case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return{fetchComics:o,fetchMoreComics:s,state:i}}(),c=e.fetchComics,i=e.fetchMoreComics,r=e.state,a=r.limit,o=r.offset,f=r.size,j=r.comics,b=r.total;Object(n.useEffect)((function(){c({limit:a,offset:o})}),[]);return Object(s.jsxs)("main",{className:"container","data-testid":"container",children:[Object(s.jsx)(u,{}),Object(s.jsx)(v,{onSearchPerTitle:function(t){c({offset:o,limit:a,title:t})},onSearchPerYear:function(t){c({offset:o,limit:a,startYear:t})},onSeeMore:function(){i()},comics:j,canSeeMore:f<=b})]})});a.a.render(Object(s.jsx)(i.a.StrictMode,{children:Object(s.jsx)(k,{})}),document.getElementById("root"))}},[[73,1,2]]]);
//# sourceMappingURL=main.3ef96304.chunk.js.map